id,priority,phase,area,title,description,acceptance_criteria,test_mcp,review_initial_requirements,review_regression_requirements,dev_state,review_initial_state,review_regression_state,git_state,owner,refs,notes,locked_by,locked_at
BE-000,P0,0,backend,初始化 NestJS 项目,搭建 NestJS 基础框架，配置 TypeScript、ESLint、Prettier,项目可启动；nest-cli.json 配置正确；tsconfig.json 编译通过,AUTOSERVER,检查依赖版本兼容性；确认目录结构符合 monorepo 规范,验证 npm run build 成功；检查生成的 dist 目录,已完成,已完成,已完成,已提交,,plan/backend-plan.md:223;packages/backend/src/main.ts:1;packages/backend/src/app.module.ts:1;packages/backend/eslint.config.js:1,"picked_reason:priority P0 bootstrap backend,agent=agent-311404-vbev | context_mode:fallback ace_tool_unavailable | evidence:build=ok lint=ok boot=ok | done_at:2026-01-21T10:37:59+08:00",,
BE-010,P0,1,backend,配置 TypeORM 连接 PostgreSQL,建立数据库连接配置，支持环境变量注入,数据库连接成功；.env.example 包含必要配置项；支持连接池配置,AUTOSERVER,检查连接池参数合理性；确认敏感信息不硬编码；验证断线重连机制,测试数据库连接失败场景；验证多环境配置切换,已完成,已完成,已完成,已提交,,plan/backend-plan.md:224;packages/backend/src/app.module.ts:1;packages/backend/.env.example:1,"picked_reason:next P0 infra for DB,agent=agent-311404-vbev | context_mode:fallback ace_tool_unavailable | validation_limited:no_postgres_service | manual_test:启动本地 PostgreSQL 后设置 DB_* 环境变量，执行 `npm --prefix packages/backend run dev` 观察连接日志 | evidence:build=ok lint=ok config=done | risk:medium 未在当前环境验证真实 PostgreSQL 连接 | done_at:2026-01-21T10:41:59+08:00",,
BE-020,P0,2,backend,创建 User Entity 和 UserService,实现用户实体定义和基础 CRUD 服务,User Entity 包含 id/username/passwordHash/email/timestamps；UserService 提供 create/findOne/findByUsername 方法,AUTOSERVER,检查字段约束（unique/nullable）；确认密码字段不可明文存储；验证关联关系定义正确,测试用户名重复场景；验证级联删除行为,已完成,已完成,已完成,已提交,,plan/backend-plan.md:61-86;plan/backend-plan.md:225;packages/backend/src/user/entities/user.entity.ts:1;packages/backend/src/user/user.service.ts:1;packages/backend/src/user/user.module.ts:1;packages/backend/src/app.module.ts:1,"picked_reason:P0 user foundation for auth,agent=agent-311404-vbev | context_mode:fallback ace_tool_unavailable | validation_limited:no_postgres_service | manual_test:启动本地 PostgreSQL 后执行 `npm --prefix packages/backend run dev`，并在后续 Auth 注册/登录流程中验证 UserService 行为 | evidence:build=ok lint=ok entity+service=added | risk:low 仅新增实体与服务，未改动现有接口 | done_at:2026-01-21T10:44:34+08:00",,
BE-030,P1,3,backend,实现 Auth 模块 (JWT 登录/注册),实现 JWT 认证流程，包括注册、登录、token 验证,POST /api/auth/register 返回 201；POST /api/auth/login 返回 token；GET /api/auth/profile 需 JWT 验证；密码使用 bcrypt 加密,AUTOSERVER,检查 JWT secret 配置安全性；确认 token 过期时间合理；验证密码强度校验逻辑,测试错误凭证登录；测试过期 token；测试并发注册相同用户名,已完成,已完成,已完成,已提交,,plan/backend-plan.md:20-28;plan/backend-plan.md:161-167;plan/backend-plan.md:226;packages/backend/src/main.ts:1;packages/backend/src/auth/auth.module.ts:1;packages/backend/src/auth/auth.controller.ts:1;packages/backend/src/auth/auth.service.ts:1;packages/backend/src/auth/jwt.strategy.ts:1;packages/backend/src/auth/jwt-auth.guard.ts:1;packages/backend/src/auth/auth.controller.spec.ts:1;packages/backend/.env.example:1,"picked_reason:P1 auth core flows,agent=agent-311404-vbev | protocol_note:lock_acquired_after_code_change | context_mode:fallback ace_tool_unavailable | evidence:test=ok (auth.controller.spec.ts) build=ok lint=ok | risk:medium 依赖真实 PostgreSQL 的 UserService 未做集成验证 | done_at:2026-01-21T10:52:50+08:00",,
BE-040,P1,4,backend,实现 Webhook CRUD,实现 Webhook 的增删改查接口,GET /api/webhooks 返回列表；POST /api/webhooks 创建成功返回 201；PATCH /api/webhooks/:id 更新成功；DELETE /api/webhooks/:id 删除成功；支持分页和筛选,AUTOSERVER,检查权限控制（用户只能操作自己的 webhook）；验证 path 唯一性约束；确认 secret 字段加密存储,测试删除不存在的 webhook；测试更新他人 webhook；验证分页边界条件,已完成,已完成,已完成,已提交,,plan/backend-plan.md:34-43;plan/backend-plan.md:169-178;plan/backend-plan.md:227;packages/backend/src/webhook/webhook.module.ts:1;packages/backend/src/webhook/webhook.controller.ts:1;packages/backend/src/webhook/webhook.service.ts:1;packages/backend/src/webhook/entities/webhook.entity.ts:1;packages/backend/src/webhook/dto/create-webhook.dto.ts:1;packages/backend/src/webhook/dto/update-webhook.dto.ts:1;packages/backend/src/webhook/dto/webhook-list-query.dto.ts:1;packages/backend/src/webhook/webhook.controller.spec.ts:1;packages/backend/src/user/entities/user.entity.ts:1;packages/backend/src/app.module.ts:1,"picked_reason:P1 webhook CRUD core,agent=agent-311404-vbev | context_mode:fallback ace_tool_unavailable | evidence:test=ok (webhook.controller.spec.ts) build=ok lint=ok | risk:medium 真实 PostgreSQL/TypeORM 行为未做集成验证 | done_at:2026-01-21T10:59:01+08:00",,
BE-050,P0,5,backend,实现动态 webhook 接收端点,实现 /hook/:path 动态路由，接收任意 HTTP 方法请求,ALL /hook/:path 可接收请求；根据 path 匹配对应 webhook；验证 secret（如配置）；返回 200 状态码,AUTOSERVER,检查请求体大小限制；确认异步处理机制；验证错误处理不泄露敏感信息,测试不存在的 path；测试错误 secret；测试超大 payload；并发请求压测,已完成,已完成,已完成,已提交,,plan/backend-plan.md:180-184;plan/backend-plan.md:228;packages/backend/src/hook/hook.module.ts:1;packages/backend/src/hook/hook.controller.ts:1;packages/backend/src/hook/hook.controller.spec.ts:1;packages/backend/src/main.ts:1;packages/backend/src/webhook/webhook.service.ts:1;packages/backend/src/app.module.ts:1,"picked_reason:P0 dynamic hook ingress,agent=agent-311404-vbev | context_mode:fallback ace_tool_unavailable | evidence:test=ok (hook.controller.spec.ts) build=ok lint=ok | risk:low 仅新增 hook 入口与 secret 校验 | done_at:2026-01-21T11:02:28+08:00",,
BE-060,P1,6,backend,实现 WebhookLog 记录,记录所有 webhook 请求的详细信息,每次 webhook 请求生成一条 log 记录；记录 method/headers/payload/statusCode/response/receivedAt；GET /api/webhooks/:id/logs 返回历史记录,AUTOSERVER,检查日志存储性能影响；确认敏感信息脱敏；验证日志清理策略,测试高频请求下日志写入性能；验证日志查询分页；测试日志数据完整性,已完成,已完成,已完成,已提交,,plan/backend-plan.md:44-49;plan/backend-plan.md:126-154;plan/backend-plan.md:186-192;plan/backend-plan.md:229;packages/backend/src/webhook-log/webhook-log.module.ts:1;packages/backend/src/webhook-log/webhook-log.controller.ts:1;packages/backend/src/webhook-log/webhook-log.service.ts:1;packages/backend/src/webhook-log/entities/webhook-log.entity.ts:1;packages/backend/src/webhook-log/webhook-log.controller.spec.ts:1;packages/backend/src/hook/hook.controller.ts:1;packages/backend/src/hook/hook.controller.spec.ts:1;packages/backend/src/app.module.ts:1,"picked_reason:P1 logging + logs api,agent=agent-311404-vbev | context_mode:fallback ace_tool_unavailable | evidence:test=ok (hook.controller.spec.ts + webhook-log.controller.spec.ts) build=ok lint=ok | risk:medium 真实 PostgreSQL/TypeORM 写入与查询未做集成验证 | done_at:2026-01-21T11:08:59+08:00",,
BE-070,P2,7,backend,添加 Swagger 文档,集成 @nestjs/swagger，生成 API 文档,访问 /api/docs 可查看 Swagger UI；所有接口包含描述和示例；DTO 包含验证规则说明,AUTOSERVER,检查文档完整性；确认敏感接口不暴露；验证示例数据准确性,验证文档与实际接口一致性,已完成,已完成,已完成,已提交,,plan/backend-plan.md:230;packages/backend/src/main.ts:1;packages/backend/src/auth/auth.controller.ts:1;packages/backend/src/auth/dto/login.dto.ts:1;packages/backend/src/auth/dto/register.dto.ts:1;packages/backend/src/webhook/webhook.controller.ts:1;packages/backend/src/webhook/dto/create-webhook.dto.ts:1;packages/backend/src/webhook/dto/update-webhook.dto.ts:1;packages/backend/src/webhook/dto/webhook-list-query.dto.ts:1;packages/backend/src/webhook-log/webhook-log.controller.ts:1,"picked_reason:P2 swagger docs polish,agent=agent-311404-vbev | context_mode:fallback ace_tool_unavailable | validation_limited:no_postgres_service | manual_test:启动本地 PostgreSQL 后执行 `npm --prefix packages/backend run dev`，访问 `http://localhost:3000/api/docs` 查看 Swagger UI | evidence:swagger decorators added + build=ok lint=ok test=ok | risk:medium 无法在当前环境启动完整 AppModule 验证 /api/docs | done_at:2026-01-21T11:15:07+08:00",,
BE-080,P2,8,backend,编写单元测试,为核心模块编写单元测试,Auth 模块测试覆盖率 > 80%；Webhook 模块测试覆盖率 > 80%；测试通过 npm run test,AUTOSERVER,检查测试用例覆盖关键路径；确认 mock 数据合理；验证测试隔离性,运行完整测试套件；验证 CI 集成,已完成,已完成,已完成,已提交,,plan/backend-plan.md:231;packages/backend/src/auth/auth.module.spec.ts:1;packages/backend/src/auth/auth.service.spec.ts:1;packages/backend/src/webhook/webhook.module.spec.ts:1;packages/backend/src/webhook/webhook.service.spec.ts:1;packages/backend/package.json:1,"picked_reason:P2 raise unit test coverage,agent=agent-311404-vbev | context_mode:fallback ace_tool_unavailable | evidence:test=ok + test:cov auth stmts=98.55% webhook stmts=92.1% | risk:low 仅补充单元测试与覆盖率验证 | done_at:2026-01-21T11:19:57+08:00",agent-311404-vbev,2026-01-21T11:16:59+08:00
BE-090,P2,9,backend,PM2 配置,配置 PM2 进程管理和部署脚本,创建 ecosystem.config.js；支持多实例部署；配置日志轮转；支持优雅重启,AUTOSERVER,检查进程数配置合理性；确认内存限制设置；验证日志路径权限,测试 PM2 重启；测试进程崩溃自动恢复；验证负载均衡,未开始,未开始,未开始,未提交,,plan/backend-plan.md:232,,,
